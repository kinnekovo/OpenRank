<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>项目详情 - 开源趋势与影响力分析平台</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <script src="https://cdn.bootcdn.net/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <style>
        /* 手绘布局专属样式补充 */
        .detail-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid #eee;
        }
        .project-title {
            font-size: 24px;
            font-weight: 700;
            color: #165DFF;
            margin-right: 16px;
        }
        .lang-tag {
            padding: 4px 12px;
            background: #e8f4ff;
            color: #165DFF;
            border-radius: 16px;
            font-size: 14px;
        }
        /* 基础信息+雷达图 左右布局 */
        .basic-radar-wrapper {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }
        /* 基础信息方块布局（2行5列） */
        .basic-info-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 16px;
        }
        .basic-info-card {
            background: #fff;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100px;
        }
        .basic-info-card .label {
            font-size: 16px;
            color: #666;
            margin-bottom: 12px;
            font-weight: 500;
        }
        .basic-info-card .value {
            font-size: 24px;
            font-weight: 700;
            color: #165DFF;
        }
        /* 分析层标签切换 */
        .analysis-tabs {
            display: flex;
            border-bottom: 1px solid #eee;
            margin-bottom: 16px;
        }
        .analysis-tab {
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }
        .analysis-tab.active {
            border-bottom-color: #165DFF;
            color: #165DFF;
            font-weight: 600;
        }
        /* 分析层内容区 */
        .analysis-content {
            display: none;
        }
        .analysis-content.active {
            display: block;
        }
        /* 图表网格布局 */
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }
        .chart-item {
            background: #fff;
            border-radius: 8px;
            padding: 16px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .chart-item h4 {
            margin: 0 0 16px 0;
            font-size: 16px;
            color: #333;
        }
        .chart-container {
            width: 100%;
            height: 300px;
        }
        /* 面包屑和返回按钮样式（复用原有） */
        .breadcrumb {
            font-size: 14px;
            color: #666;
            margin-bottom: 16px;
        }
        .breadcrumb a {
            color: #165DFF;
            text-decoration: none;
        }
        .btn-secondary {
            padding: 8px 16px;
            background: #f5f7fa;
            border: 1px solid #e5e6eb;
            border-radius: 4px;
            color: #333;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        .btn-secondary:hover {
            background: #e8f4ff;
            border-color: #165DFF;
            color: #165DFF;
        }
    </style>
</head>
<body>
    <!-- 顶部导航（保留原有） -->
    <nav class="navbar">
        <div class="navbar-logo">
            <i class="bi bi-bar-chart-line"></i>
            <span>开源趋势与影响力分析平台</span>
        </div>
        <div class="navbar-menu">
            <a href="../index.html">首页</a>
            <a href="../influence-analysis/index.html">影响力排名</a>
            <a href="../trend-analysis/index.html">技术趋势分析</a>
            <a href="./list.html">项目详情页</a>
            <a href="../languages/list.html">编程语言</a>
            <a href="../technology/list.html">技术关键词</a>
        </div>
        <div class="navbar-user">
            <span>登录用户</span>
        </div>
    </nav>

    <div class="main-container">
        <!-- 侧边栏（页面内导航） -->
        <aside class="sidebar">
            <div class="sidebar-menu">
                <a href="#project-info" class="sidebar-item active">
                    <i class="bi bi-info-circle"></i>
                    <span>项目信息</span>
                </a>
                <a href="#project-visualization" class="sidebar-item">
                    <i class="bi bi-bar-chart-line"></i>
                    <span>项目可视化</span>
                </a>
                <a href="#project-data-table" class="sidebar-item">
                    <i class="bi bi-table"></i>
                    <span>数据表格</span>
                </a>
            </div>
            <div class="sidebar-footer">
                <div>数据更新时间</div>
                <div class="update-time">2026-01</div>
            </div>
        </aside>

        <!-- 主内容区（恢复面包屑+返回按钮） -->
        <div class="content">
            <!-- 1. 项目信息模块 -->
            <div id="project-info">
                <!-- 1. 面包屑导航（恢复） -->
                <div class="breadcrumb">
                    <a href="../index.html">首页</a> > 
                    <a href="list.html">项目信息列表</a> > 
                    <span id="current-project">项目详情</span>
                </div>

                <!-- 2. 返回按钮（恢复） -->
                <button class="btn-secondary" style="margin-bottom: 20px;" onclick="window.location.href='list.html'">
                    <i class="bi bi-arrow-left"></i> 返回列表
                </button>

                <!-- 3. 顶部项目名称标题 -->
                <div class="detail-header">
                    <h1 class="project-title" id="project-name">项目名称</h1>
                    <span class="lang-tag" id="project-lang">编程语言</span>
                </div>

                <!-- 4. 基础信息方块 + 右侧雷达图 -->
                <div class="basic-radar-wrapper">
                    <!-- 左侧：基础信息方块（2行5列） -->
                    <div class="basic-info-grid" id="basic-info-container">
                        <!-- 动态填充10个基础信息方块 -->
                        <div class="basic-info-card"><div class="label">加载中...</div></div>
                        <div class="basic-info-card"><div class="label">加载中...</div></div>
                        <div class="basic-info-card"><div class="label">加载中...</div></div>
                        <div class="basic-info-card"><div class="label">加载中...</div></div>
                        <div class="basic-info-card"><div class="label">加载中...</div></div>
                        <div class="basic-info-card"><div class="label">加载中...</div></div>
                        <div class="basic-info-card"><div class="label">加载中...</div></div>
                        <div class="basic-info-card"><div class="label">加载中...</div></div>
                        <div class="basic-info-card"><div class="label">加载中...</div></div>
                        <div class="basic-info-card"><div class="label">加载中...</div></div>
                    </div>

                    <!-- 右侧：雷达图区域 -->
                    <div class="radar-chart-wrapper">
                        <h4 style="margin: 0 0 16px 0;">核心指标雷达图</h4>
                        <div id="radar-chart" class="chart-container"></div>
                    </div>
                </div>
            </div>

            <!-- 2. 项目可视化模块 -->
            <div id="project-visualization">
                <!-- 5. 下方分析层标签 + 可视化区域 -->
                <!-- 分析层标签 -->
                <div class="analysis-tabs">
                    <div class="analysis-tab active" data-tab="core">核心指标全景层</div>
                    <div class="analysis-tab" data-tab="trend">时间趋势分析层</div>
                    <div class="analysis-tab" data-tab="composition">构成拆解分析层</div>
                    <div class="analysis-tab" data-tab="compare">行业对比分析层</div>
                </div>

                <!-- 分析层内容区 -->
                <!-- 5.1 核心指标全景层 -->
                <div class="analysis-content active" id="core-tab">
                    <div class="chart-grid">
                        <div class="chart-item">
                            <h4>核心指标vs行业均值</h4>
                            <div id="core-compare-chart" class="chart-container"></div>
                        </div>
                        <div class="chart-item">
                            <h4>指标得分分布</h4>
                            <div id="core-distribution-chart" class="chart-container"></div>
                        </div>
                    </div>
                </div>

                <!-- 5.2 时间趋势分析层 -->
                <div class="analysis-content" id="trend-tab">
                    <div class="chart-grid">
                        <div class="chart-item">
                            <h4>星标数趋势（近12月）</h4>
                            <div id="stars-trend-chart" class="chart-container"></div>
                        </div>
                        <div class="chart-item">
                            <h4>活跃度得分趋势（近12月）</h4>
                            <div id="activity-trend-chart" class="chart-container"></div>
                        </div>
                        <div class="chart-item">
                            <h4>贡献者增长趋势</h4>
                            <div id="contributors-trend-chart" class="chart-container"></div>
                        </div>
                        <div class="chart-item">
                            <h4>Issue处理趋势</h4>
                            <div id="issue-trend-chart" class="chart-container"></div>
                        </div>
                    </div>
                </div>

                <!-- 5.3 构成拆解分析层 -->
                <div class="analysis-content" id="composition-tab">
                    <div class="chart-grid">
                        <div class="chart-item">
                            <h4>影响力得分构成</h4>
                            <div id="influence-pie-chart" class="chart-container"></div>
                        </div>
                        <div class="chart-item">
                            <h4>代码提交构成</h4>
                            <div id="commit-composition-chart" class="chart-container"></div>
                        </div>
                        <div class="chart-item">
                            <h4>Issue类型分布</h4>
                            <div id="issue-type-chart" class="chart-container"></div>
                        </div>
                        <div class="chart-item">
                            <h4>编程语言占比</h4>
                            <div id="lang-ratio-chart" class="chart-container"></div>
                        </div>
                    </div>
                </div>

                <!-- 5.4 行业对比分析层 -->
                <div class="analysis-content" id="compare-tab">
                    <div class="chart-grid">
                        <div class="chart-item">
                            <h4>同语言TOP10对比</h4>
                            <div id="top10-compare-chart" class="chart-container"></div>
                        </div>
                        <div class="chart-item">
                            <h4>指标分位分布图</h4>
                            <div id="quantile-chart" class="chart-container"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3. 项目数据表格模块 -->
            <div id="project-data-table">
                <!-- 6. 完整数据表格（底部） - 仅改HTML继承现有CSS -->
                <div style="margin-top: 32px;" class="table-row">
                    <div class="table-card">
                        <div class="table-header">
                            <h3>项目完整数据</h3>
                        </div>
                        <div class="table-container">
                            <!-- 关键1：把id改成ranking-table，继承已有样式；保留detail-table作为备用 -->
                            <table id="ranking-table" class="table" style="min-width: 1000px;">
                                <thead>
                                    <tr>
                                        <th>指标名称</th>
                                        <th>指标值</th>
                                        <th>指标说明</th>
                                    </tr>
                                </thead>
                                <tbody id="detail-table-body">
                                    <tr>
                                        <td colspan="3" style="text-align: center; padding: 40px 0; color: #999;">
                                            正在加载完整数据...
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-left">© 2026 开源趋势与影响力分析平台</div>
            <div class="footer-right">
                <a href="#"><i class="bi bi-github"></i> 源码地址</a>
                <a href="#"><i class="bi bi-file-text"></i> 帮助文档</a>
                <a href="#"><i class="bi bi-envelope"></i> 联系我们</a>
            </div>
        </div>
    </footer>

    <!-- 引入外部JS -->
    <script src="./detail.js"></script>
</body>
</html>